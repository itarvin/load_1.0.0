/** 
 Picker v1.2.0 */
+function(a){"use strict";var b=function(b){function c(){if(f.opened)for(var a=0;a<f.cols.length;a++)f.cols[a].divider||(f.cols[a].calcSize(),f.cols[a].setValue(f.cols[a].value,0,!1))}function d(a){if(a.preventDefault(),kui.isWeixin&&"android"==kui.device.os&&f.params.inputReadOnly&&(this.focus(),this.blur()),!f.opened){if(f.open(),f.params.scrollToInput){var b=f.input.parents(".content");if(0===b.length)return;var c,d=parseInt(b.css("padding-top"),10),e=parseInt(b.css("padding-bottom"),10),g=b[0].offsetHeight-d-f.container.height(),h=b[0].scrollHeight-d-f.container.height(),i=f.input.offset().top-d+f.input[0].offsetHeight;if(i>g){var j=b.scrollTop()+i-g;j+g>h&&(c=j+g-h+e,g===h&&(c=f.container.height()),b.css({"padding-bottom":c+"px"})),b.scrollTop(j,300)}}a.stopPropagation()}}function e(){f.opened=!1,f.input&&f.input.length>0&&f.input.parents(".content").css({"padding-bottom":""})}var f=this,g={updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,rotateEffect:!1,momentumRatio:7,freeMode:!1,scrollToInput:!0,inputReadOnly:!0,title:"",btn:[{text:"确定",icon:"fr"}],head:{},id:"picker",type:"picker",anim:"bottom"};b=b||{},g.head.title=b.title,g.head.btn=b.btn||g.btn,b=a.extend(g,b),b.skin+=" kui-picker",f.params=b,f.cols=[],f.initialized=!1,f.inline=!!f.params.container;var h="ios"==kui.device.os||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&"android"!=kui.device.os;return f.setValue=function(a,b){for(var c=0,d=0;d<f.cols.length;d++)f.cols[d]&&!f.cols[d].divider&&(f.cols[d].setValue(a[c],b),c++)},f.updateValue=function(){for(var b=[],c=[],d=0;d<f.cols.length;d++)f.cols[d].divider||(b.push(f.cols[d].value),c.push(f.cols[d].displayValue));b.indexOf(void 0)>=0||(f.value=b,f.displayValue=c,f.params.onChange&&f.params.onChange(f,f.value,f.displayValue),f.input&&f.input.length>0&&(a(f.input).val(f.params.formatValue?f.params.formatValue(f,f.value):f.value.join(" ")),a(f.input).trigger("change")))},f.initPickerCol=function(b,c){function d(){s=a.requestAnimationFrame(function(){m.updateItems(void 0,void 0,0),d()})}function e(b){u||t||(b.preventDefault(),t=!0,v=w="touchstart"===b.type?b.targetTouches[0].pageY:b.pageY,x=(new Date).getTime(),F=!0,z=B=a.getTranslate(m.wrapper[0],"y"))}function g(b){if(t){b.preventDefault(),F=!1,w="touchmove"===b.type?b.targetTouches[0].pageY:b.pageY,u||(a.cancelAnimationFrame(s),u=!0,z=B=a.getTranslate(m.wrapper[0],"y"),m.wrapper.transition(0)),b.preventDefault();var c=w-v;B=z+c,A=void 0,B<q&&(B=q-Math.pow(q-B,.8),A="min"),B>r&&(B=r+Math.pow(B-r,.8),A="max"),m.wrapper.transform("translate3d(0,"+B+"px,0)"),m.updateItems(void 0,B,0,f.params.updateValuesOnTouchmove),D=B-C||B,E=(new Date).getTime(),C=B}}function i(b){if(!t||!u)return void(t=u=!1);t=u=!1,m.wrapper.transition(""),A&&("min"===A?m.wrapper.transform("translate3d(0,"+q+"px,0)"):m.wrapper.transform("translate3d(0,"+r+"px,0)")),y=(new Date).getTime();var c,e;y-x>300?e=B:(c=Math.abs(D/(y-E)),e=B+D*f.params.momentumRatio),e=Math.max(Math.min(e,r),q);var g=-Math.floor((e-r)/o);f.params.freeMode||(e=-g*o+r),m.wrapper.transform("translate3d(0,"+parseInt(e,10)+"px,0)"),m.updateItems(g,e,"",!0),f.params.updateValuesOnMomentum&&(d(),m.wrapper.transitionEnd(function(){a.cancelAnimationFrame(s)})),setTimeout(function(){F=!0},100)}function j(b){if(F){a.cancelAnimationFrame(s);var c=a(this).attr("data-picker-value");m.setValue(c)}}var k=a(b),l=k.index(),m=f.cols[l];if(!m.divider){m.container=k,m.wrapper=m.container.find(".picker-items-col-wrapper"),m.items=m.wrapper.find(".picker-item");var n,o,p,q,r;m.replaceValues=function(a,b){m.destroyEvents(),m.values=a,m.displayValues=b;var c=f.columnHTML(m,!0);m.wrapper.html(c),m.items=m.wrapper.find(".picker-item"),m.calcSize(),m.setValue(m.values[0],0,!0),m.initEvents()},m.calcSize=function(){f.params.rotateEffect&&(m.container.removeClass("picker-items-col-absolute"),m.width||m.container.css({width:""}));var b,c;b=0,c=m.container[0].offsetHeight,n=m.wrapper[0].offsetHeight,o=m.items[0].offsetHeight,p=o*m.items.length,q=c/2-p+o/2,r=c/2-o/2,m.width&&(b=m.width,parseInt(b,10)===b&&(b+="px"),m.container.css({width:b})),f.params.rotateEffect&&(m.width||(m.items.each(function(){var c=a(this);c.css({width:"auto"}),b=Math.max(b,c[0].offsetWidth),c.css({width:""})}),m.container.css({width:b+2+"px"})),m.container.addClass("picker-items-col-absolute"))},m.calcSize(),m.wrapper.transform("translate3d(0,"+r+"px,0)").transition(0);var s;m.setValue=function(b,c,e){"undefined"==typeof c&&(c="");var g=m.wrapper.find('.picker-item[data-picker-value="'+b+'"]').index();if("undefined"!=typeof g&&g!==-1){var h=-g*o+r;m.wrapper.transition(c),m.wrapper.transform("translate3d(0,"+h+"px,0)"),f.params.updateValuesOnMomentum&&m.activeIndex&&m.activeIndex!==g&&(a.cancelAnimationFrame(s),m.wrapper.transitionEnd(function(){a.cancelAnimationFrame(s)}),d()),m.updateItems(g,h,c,e)}},m.updateItems=function(b,c,d,e){"undefined"==typeof c&&(c=a.getTranslate(m.wrapper[0],"y")),"undefined"==typeof b&&(b=-Math.round((c-r)/o)),b<0&&(b=0),b>=m.items.length&&(b=m.items.length-1);var g=m.activeIndex;m.activeIndex=b,m.wrapper.find(".picker-selected").removeClass("picker-selected"),f.params.rotateEffect&&m.items.transition(d);var i=m.items.eq(b).addClass("picker-selected").transform("");if((e||"undefined"==typeof e)&&(m.value=i.attr("data-picker-value"),m.displayValue=m.displayValues?m.displayValues[b]:m.value,g!==b&&(m.onChange&&m.onChange(f,m.value,m.displayValue),f.updateValue())),f.params.rotateEffect){(c-(Math.floor((c-r)/o)*o+r))/o;m.items.each(function(){var b=a(this),d=b.index()*o,e=r-c,f=d-e,g=f/o,i=Math.ceil(m.height/o/2)+1,j=-18*g;j>180&&(j=180),j<-180&&(j=-180),Math.abs(g)>i?b.addClass("picker-item-far"):b.removeClass("picker-item-far"),b.transform("translate3d(0, "+(-c+r)+"px, "+(h?-110:0)+"px) rotateX("+j+"deg)")})}},c&&m.updateItems(0,r,0);var t,u,v,w,x,y,z,A,B,C,D,E,F=!0;m.initEvents=function(b){var c=b?"off":"on";m.container[c](a.touchEvents.start,e),m.container[c](a.touchEvents.move,g),m.container[c](a.touchEvents.end,i),m.items[c]("click",j)},m.destroyEvents=function(){m.initEvents(!0)},m.initEvents()}},a(window).on("resize",c),f.columnHTML=function(b,c){var d="",e="";return b.divider?e+='<div class="picker-items-col picker-items-col-divider '+(b.textAlign?"picker-items-col-"+b.textAlign:"")+" "+(b.className||"")+'">'+b.content+"</div>":(a.each(b.values,function(a,b){b="object"==typeof b?b:{value:b,text:b},d+='<div class="picker-item" data-picker-value="'+b.value+'">'+b.text+"</div>"}),e+='<div class="picker-items-col '+(b.textAlign?"picker-items-col-"+b.textAlign:"")+" "+(b.className||"")+'"><div class="picker-items-col-wrapper">'+d+"</div></div>"),c?d:e},f.layout=function(){var a,c="";f.cols=[];var d="";for(a=0;a<f.params.cols.length;a++){var e=f.params.cols[a];d+=f.columnHTML(f.params.cols[a]),f.cols.push(e)}b.skin+=f.params.rotateEffect?" picker-3d":"",c='<div class="picker-modal-inner picker-items">'+d+'<div class="picker-center-highlight"></div></div>',b.content=c,f.pickerHTML=c},f.params.input&&(f.input=a(f.params.input),f.input.length>0&&(f.params.inputReadOnly&&f.input.prop("readOnly",!0),f.inline||f.input.on("click",d))),f.opened=!1,f.open=function(){f.opened||(f.layout(),f.opened=!0,f.inline?(f.container=a(f.pickerHTML),f.container.addClass("picker-modal-inline"),a(f.params.container).append(f.container)):(f.container=a.layer(b),a(f.container).on("close",function(){e()})),f.container.find(".picker-items-col").each(function(){var a=!0;(!f.initialized&&f.params.value||f.initialized&&f.value)&&(a=!1),f.initPickerCol(this,a)}),f.initialized?f.value&&f.setValue(f.value,0):f.params.value&&f.setValue(f.params.value,0)),f.initialized=!0},f.close=function(){f.opened&&!f.inline&&a.layer.close(f.container)},f.destroy=function(){a.layer.close(f.container),f.params.input&&f.input.length>0&&f.input.off("click",d),a(window).off("resize",c)},f.inline&&f.open(),f};a.fn.picker=function(c){var d=arguments;return this.each(function(){if(this){var e=a(this),f=e.data("picker");if(!f){var g=a.extend({input:this,value:e.val()?e.val().split(" "):""},c);f=new b(g),e.data("picker",f)}"string"==typeof c&&f[c].apply(f,Array.prototype.slice.call(d,1))}})}}(Zepto),+function(a){"use strict";var b=new Date,c=function(a){return a<10?"0"+a:a},d=function(){for(var a=[],b=0;b<=59;b++)a.push(c(b));return a}(),e=function(){for(var a=[],b=0;b<=23;b++)a.push(b);return a}(),f=function(a){return d.slice(1,a?a+1:32)},g=function(a,b){var c=new Date(b,parseInt(a)+1-1,1),d=new Date(c-1);return f(d.getDate())},h=d.slice(1,13),i=function(a,b){for(var c=[],d=a;d<=b;d++)c.push(d);return c},j={skin:"kui-timepicker",defaults:"",minYear:"1950",maxYear:b.getFullYear()+10,rotateEffect:!1,onChange:function(b,c){var d=g(b.cols[1].value,b.cols[0].value),e=b.cols[2].value;a(b.cols[2].items).eq(d.length-1).addClass("maxDay").siblings().removeClass("maxDay"),e>d.length&&(e=d.length),b.cols[2].setValue(e)},formatValue:function(a,b){return b[0]+"-"+b[1]+"-"+b[2]+" "+b[3]+":"+b[4]}},k=function(a){a=a.replace(/-/g,"/");var b=new Date(a),d=[b.getFullYear(),c(b.getMonth()+1),c(b.getDate()),b.getHours(),c(b.getMinutes())];return d};a.fn.datetimePicker=function(c){return this.each(function(){if(this){var g=a.extend(j,c);g.defaults&&(b=new Date(g.defaults)),j.value=a(this).val()||b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate()+" "+b.getHours()+":"+b.getMinutes()||"",g.cols=[{values:i(g.minYear,g.maxYear)},{values:h},{values:f()},{divider:!0,content:"  "},{values:e},{divider:!0,content:":"},{values:d}],g.value=k(g.value,b),a(this).picker(g),c.value&&a(this).val(g.formatValue(g,g.value))}})}}(Zepto);